{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Joe/Projects/PDX-Forward-Policy-Explorer/app/lib/constants.ts"],"sourcesContent":["\nexport const COST_CATEGORIES = [\n  { id: \"all\", name: \"All Costs\", emoji: \"üîç\" },\n  { id: \"none\", name: \"No Cost\", emoji: \"üÜì\" },\n  { id: \"minimal\", name: \"Minimal Cost\", emoji: \"üí∞\" },\n  { id: \"moderate\", name: \"Moderate Cost\", emoji: \"üí∞üí∞\" },\n  { id: \"substantial\", name: \"Substantial Cost\", emoji: \"üí∞üí∞üí∞\" },\n  { id: \"variable\", name: \"Variable Cost\", emoji: \"üé≤\" },\n\n] as const;\n\nexport const FISCAL_IMPACTS = [\n  { id: \"all\", name: \"All Budgets\", emoji: \"üîç\" },\n  { id: \"revenue_neutral\", name: \"Revenue Neutral\", emoji: \"‚öñÔ∏è\" },\n  { id: \"cost_saving\", name: \"Cost Saving\", emoji: \"üíé\" },\n  { id: \"needs_revenue\", name: \"Needs Revenue\", emoji: \"ü§å\" },\n] as const;\n\nexport const DOMAINS = [\n  { id: \"all\", name: \"Policy Areas\", emoji: \"üîç\" },\n  { id: \"housing\", name: \"Housing\", emoji: \"üèòÔ∏è\" },\n  { id: \"environment\", name: \"Environment\", emoji: \"üå±\" },\n  { id: \"safety\", name: \"Safety\", emoji: \"üõ°Ô∏è\" },\n  { id: \"democracy\", name: \"Democracy\", emoji: \"üó≥Ô∏è\" },\n  { id: \"economic-development\", name: \"Economic Development\", emoji: \"üìà\" },\n  {\n    id: \"infrastructure-and-transportation\",\n    name: \"Infrastructure & Transportation\",\n    emoji: \"üöå\",\n  },\n  { id: \"social-services\", name: \"Social Services\", emoji: \"ü§ù\" },\n  { id: \"public-health\", name: \"Public Health\", emoji: \"‚öïÔ∏è\" },\n] as const;\n\nexport const STAKEHOLDER_CATEGORIES = [\n\n]\n\nexport type CostCategory = (typeof COST_CATEGORIES)[number][\"id\"];\nexport type FiscalImpact = (typeof FISCAL_IMPACTS)[number][\"id\"];\nexport type StakeholderCategory = (typeof STAKEHOLDER_CATEGORIES)[number][\"id\"];\nexport type DomainId = (typeof DOMAINS)[number][\"id\"];\n\nexport type DomainMap = {\n  [key: string]: DomainId[];\n};\n\nexport const SHEET_ID = \"1wGJeSwToqQp7Mg-77TYRzBlrTRsoECJg0QUMDXU3Q_4\";\n\nexport const SHEETS = {\n  policies: \"Policies\",\n  policyDomains: \"Policy_Domains\",\n} as const;\n\nexport type DomainFilterMode = \"ANY\" | \"ALL\""],"names":[],"mappings":";;;;;;;;AACO,MAAM,kBAAkB;IAC7B;QAAE,IAAI;QAAO,MAAM;QAAa,OAAO;IAAK;IAC5C;QAAE,IAAI;QAAQ,MAAM;QAAW,OAAO;IAAK;IAC3C;QAAE,IAAI;QAAW,MAAM;QAAgB,OAAO;IAAK;IACnD;QAAE,IAAI;QAAY,MAAM;QAAiB,OAAO;IAAO;IACvD;QAAE,IAAI;QAAe,MAAM;QAAoB,OAAO;IAAS;IAC/D;QAAE,IAAI;QAAY,MAAM;QAAiB,OAAO;IAAK;CAEtD;AAEM,MAAM,iBAAiB;IAC5B;QAAE,IAAI;QAAO,MAAM;QAAe,OAAO;IAAK;IAC9C;QAAE,IAAI;QAAmB,MAAM;QAAmB,OAAO;IAAK;IAC9D;QAAE,IAAI;QAAe,MAAM;QAAe,OAAO;IAAK;IACtD;QAAE,IAAI;QAAiB,MAAM;QAAiB,OAAO;IAAK;CAC3D;AAEM,MAAM,UAAU;IACrB;QAAE,IAAI;QAAO,MAAM;QAAgB,OAAO;IAAK;IAC/C;QAAE,IAAI;QAAW,MAAM;QAAW,OAAO;IAAM;IAC/C;QAAE,IAAI;QAAe,MAAM;QAAe,OAAO;IAAK;IACtD;QAAE,IAAI;QAAU,MAAM;QAAU,OAAO;IAAM;IAC7C;QAAE,IAAI;QAAa,MAAM;QAAa,OAAO;IAAM;IACnD;QAAE,IAAI;QAAwB,MAAM;QAAwB,OAAO;IAAK;IACxE;QACE,IAAI;QACJ,MAAM;QACN,OAAO;IACT;IACA;QAAE,IAAI;QAAmB,MAAM;QAAmB,OAAO;IAAK;IAC9D;QAAE,IAAI;QAAiB,MAAM;QAAiB,OAAO;IAAK;CAC3D;AAEM,MAAM,yBAAyB,EAErC;AAWM,MAAM,WAAW;AAEjB,MAAM,SAAS;IACpB,UAAU;IACV,eAAe;AACjB","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Joe/Projects/PDX-Forward-Policy-Explorer/app/lib/data.ts"],"sourcesContent":["import Papa from 'papaparse';\r\nimport { Policy, PolicyDomain, DomainMap } from './types';\r\nimport { SHEET_ID, SHEETS, DomainId } from './constants';\r\n\r\nexport async function fetchSheet<T>(sheetName: string): Promise<T[]> {\r\n    try {\r\n        const response = await fetch(\r\n            `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(\r\n                sheetName\r\n            )}`\r\n        );\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`Failed to fetch ${sheetName}`);\r\n        }\r\n\r\n        const text = await response.text();\r\n        return Papa.parse<T>(text, {\r\n            header: true,\r\n            skipEmptyLines: true,\r\n            transform: (value) => value.trim(),\r\n        }).data;\r\n    } catch (err) {\r\n        console.error(`Error fetching ${sheetName}:`, err);\r\n        throw err;\r\n    }\r\n}\r\n\r\nexport async function fetchPolicies(): Promise<Policy[]> {\r\n    return fetchSheet<Policy>(SHEETS.policies);\r\n}\r\n\r\nexport async function fetchPolicyDomains(): Promise<DomainMap> {\r\n    const domainData = await fetchSheet<PolicyDomain>(SHEETS.policyDomains);\r\n    const domainMap: DomainMap = {};\r\n\r\n    domainData.forEach((row) => {\r\n        const domains = row.domain_id\r\n            .split(\" \")\r\n            .filter(Boolean)\r\n            .map((domain) => domain.replace(/,/g, \"\").trim()) as DomainId[];\r\n\r\n        domainMap[row.policy_id] = domains;\r\n    });\r\n\r\n    return domainMap;\r\n}\r\n\r\nexport async function fetchPolicyById(policyId: string): Promise<Policy | null> {\r\n    const policies = await fetchPolicies();\r\n    return policies.find(p => p.policy_id === policyId) || null;\r\n}"],"names":[],"mappings":";;;;;;AAAA;AAEA;;;AAEO,eAAe,WAAc,SAAiB;IACjD,IAAI;QACA,MAAM,WAAW,MAAM,MACnB,CAAC,uCAAuC,EAAE,uHAAA,CAAA,WAAQ,CAAC,2BAA2B,EAAE,mBAC5E,YACD;QAGP,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM,CAAC,gBAAgB,EAAE,WAAW;QAClD;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,sIAAA,CAAA,UAAI,CAAC,KAAK,CAAI,MAAM;YACvB,QAAQ;YACR,gBAAgB;YAChB,WAAW,CAAC,QAAU,MAAM,IAAI;QACpC,GAAG,IAAI;IACX,EAAE,OAAO,KAAK;QACV,QAAQ,KAAK,CAAC,CAAC,eAAe,EAAE,UAAU,CAAC,CAAC,EAAE;QAC9C,MAAM;IACV;AACJ;AAEO,eAAe;IAClB,OAAO,WAAmB,uHAAA,CAAA,SAAM,CAAC,QAAQ;AAC7C;AAEO,eAAe;IAClB,MAAM,aAAa,MAAM,WAAyB,uHAAA,CAAA,SAAM,CAAC,aAAa;IACtE,MAAM,YAAuB,CAAC;IAE9B,WAAW,OAAO,CAAC,CAAC;QAChB,MAAM,UAAU,IAAI,SAAS,CACxB,KAAK,CAAC,KACN,MAAM,CAAC,SACP,GAAG,CAAC,CAAC,SAAW,OAAO,OAAO,CAAC,MAAM,IAAI,IAAI;QAElD,SAAS,CAAC,IAAI,SAAS,CAAC,GAAG;IAC/B;IAEA,OAAO;AACX;AAEO,eAAe,gBAAgB,QAAgB;IAClD,MAAM,WAAW,MAAM;IACvB,OAAO,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,SAAS,KAAK,aAAa;AAC3D","debugId":null}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Joe/Projects/PDX-Forward-Policy-Explorer/app/%40modal/policy/%5BpolicyId%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { fetchPolicyById, fetchPolicyDomains } from '@/app/lib/data';\r\nimport { Policy, DomainMap } from '@/app/lib/types';\r\nimport { DOMAINS, COST_CATEGORIES, FISCAL_IMPACTS, DomainId } from '@/app/lib/constants';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { X, Share2, Check } from 'lucide-react';\r\n\r\nexport default function PolicyDetailModal() {\r\n    const params = useParams();\r\n    const router = useRouter();\r\n    const policyId = params.policyId as string;\r\n\r\n    const [policy, setPolicy] = useState<Policy | null>(null);\r\n    const [policyDomains, setPolicyDomains] = useState<DomainId[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const loadPolicy = async () => {\r\n            try {\r\n                setLoading(true);\r\n\r\n                const [policyData, domainsData] = await Promise.all([\r\n                    fetchPolicyById(policyId),\r\n                    fetchPolicyDomains(),\r\n                ]);\r\n\r\n                if (!policyData) {\r\n                    setError('Policy not found');\r\n                    return;\r\n                }\r\n\r\n                setPolicy(policyData);\r\n                setPolicyDomains(domainsData[policyId] || []);\r\n            } catch (err) {\r\n                setError(err instanceof Error ? err.message : 'Failed to load policy');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadPolicy();\r\n    }, [policyId]);\r\n\r\n    // Close modal and return to main page\r\n    const closeModal = () => {\r\n        router.back(); // This returns to the previous page\r\n    };\r\n\r\n    // Handle clicks outside the modal to close it\r\n    const handleBackdropClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        if (e.target === e.currentTarget) {\r\n            closeModal();\r\n        }\r\n    };\r\n\r\n    // Handle escape key to close modal\r\n    useEffect(() => {\r\n        const handleEsc = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape') {\r\n                closeModal();\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', handleEsc);\r\n        return () => window.removeEventListener('keydown', handleEsc);\r\n    }, []);\r\n\r\n    // Similar helper functions as before for rendering different sections...\r\n    // (Keep the same helper functions you had in the previous implementation)\r\n\r\n    // Function to handle domain clicks\r\n    const handleDomainClick = (domain: DomainId) => {\r\n        // Close the modal and navigate to filtered view\r\n        router.push(`/?domains=${domain}`);\r\n    };\r\n\r\n    // Copy link to policy\r\n    const copyPolicyLink = () => {\r\n        const url = new URL(window.location.href);\r\n        url.pathname = `/policy/${policyId}`;\r\n\r\n        navigator.clipboard.writeText(url.toString())\r\n            .then(() => {\r\n                setCopied(true);\r\n                setTimeout(() => setCopied(false), 2000);\r\n            })\r\n            .catch(err => console.error(\"Failed to copy URL: \", err));\r\n    };\r\n\r\n    // Helper function for domain colors\r\n    const getDomainColor = (domain: DomainId): string => {\r\n        const colors: Record<Exclude<DomainId, \"all\">, string> = {\r\n            housing: \"bg-pink-100 text-pink-800\",\r\n            environment: \"bg-green-100 text-green-800\",\r\n            safety: \"bg-yellow-100 text-yellow-800\",\r\n            democracy: \"bg-blue-100 text-blue-800\",\r\n            \"economic-development\": \"bg-orange-100 text-orange-800\",\r\n            \"infrastructure-and-transportation\": \"bg-indigo-100 text-indigo-800\",\r\n            \"social-services\": \"bg-purple-100 text-purple-800\",\r\n            \"public-health\": \"bg-red-100 text-red-800\",\r\n        };\r\n\r\n        return (\r\n            colors[domain as Exclude<DomainId, \"all\">] || \"bg-gray-100 text-gray-800\"\r\n        );\r\n    };\r\n\r\n    // Include the same helper functions for rendering stakeholders and challenges\r\n    // as in your previous implementation\r\n\r\n    if (!policy && !loading && !error) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\"\r\n            onClick={handleBackdropClick}\r\n        >\r\n            <div className=\"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto p-6 relative\">\r\n                {/* Close button */}\r\n                <button\r\n                    onClick={closeModal}\r\n                    className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-700\"\r\n                    aria-label=\"Close\"\r\n                >\r\n                    <X size={24} />\r\n                </button>\r\n\r\n                {/* Share button */}\r\n                <button\r\n                    onClick={copyPolicyLink}\r\n                    className=\"absolute top-4 right-14 text-gray-500 hover:text-gray-700 flex items-center\"\r\n                    aria-label=\"Share policy link\"\r\n                >\r\n                    {copied ? (\r\n                        <>\r\n                            <Check size={18} className=\"mr-1 text-green-600\" />\r\n                            <span className=\"text-sm text-green-600\">Copied!</span>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Share2 size={18} className=\"mr-1\" />\r\n                            <span className=\"text-sm\">Share</span>\r\n                        </>\r\n                    )}\r\n                </button>\r\n\r\n                {loading ? (\r\n                    <div className=\"flex items-center justify-center min-h-[200px]\">\r\n                        <div className=\"text-lg\">Loading policy details...</div>\r\n                    </div>\r\n                ) : error ? (\r\n                    <div className=\"p-4\">\r\n                        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n                            <h3 className=\"text-red-800 font-semibold mb-2\">\r\n                                Error Loading Policy\r\n                            </h3>\r\n                            <p className=\"text-red-600\">{error}</p>\r\n                        </div>\r\n                    </div>\r\n                ) : policy && (\r\n                    <>\r\n                        {/* Policy title and basic info */}\r\n                        <h2 className=\"text-2xl font-semibold mb-4 pr-32\">{policy.title}</h2>\r\n\r\n                        <p className=\"text-gray-600 mb-6\">\r\n                            {policy.summary || policy.description || \"\"}\r\n                        </p>\r\n\r\n                        {/* Rest of your policy detail content */}\r\n                        {/* Include all the sections you had in your previous implementation */}\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAIA;AAAA;AAAA;AARA;;;;;;AAUe,SAAS;IACpB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,OAAO,QAAQ;IAEhC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACpD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IACjE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,aAAa;YACf,IAAI;gBACA,WAAW;gBAEX,MAAM,CAAC,YAAY,YAAY,GAAG,MAAM,QAAQ,GAAG,CAAC;oBAChD,CAAA,GAAA,kHAAA,CAAA,kBAAe,AAAD,EAAE;oBAChB,CAAA,GAAA,kHAAA,CAAA,qBAAkB,AAAD;iBACpB;gBAED,IAAI,CAAC,YAAY;oBACb,SAAS;oBACT;gBACJ;gBAEA,UAAU;gBACV,iBAAiB,WAAW,CAAC,SAAS,IAAI,EAAE;YAChD,EAAE,OAAO,KAAK;gBACV,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAClD,SAAU;gBACN,WAAW;YACf;QACJ;QAEA;IACJ,GAAG;QAAC;KAAS;IAEb,sCAAsC;IACtC,MAAM,aAAa;QACf,OAAO,IAAI,IAAI,oCAAoC;IACvD;IAEA,8CAA8C;IAC9C,MAAM,sBAAsB,CAAC;QACzB,IAAI,EAAE,MAAM,KAAK,EAAE,aAAa,EAAE;YAC9B;QACJ;IACJ;IAEA,mCAAmC;IACnC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,YAAY,CAAC;YACf,IAAI,EAAE,GAAG,KAAK,UAAU;gBACpB;YACJ;QACJ;QAEA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACvD,GAAG,EAAE;IAEL,yEAAyE;IACzE,0EAA0E;IAE1E,mCAAmC;IACnC,MAAM,oBAAoB,CAAC;QACvB,gDAAgD;QAChD,OAAO,IAAI,CAAC,CAAC,UAAU,EAAE,QAAQ;IACrC;IAEA,sBAAsB;IACtB,MAAM,iBAAiB;QACnB,MAAM,MAAM,IAAI,IAAI,OAAO,QAAQ,CAAC,IAAI;QACxC,IAAI,QAAQ,GAAG,CAAC,QAAQ,EAAE,UAAU;QAEpC,UAAU,SAAS,CAAC,SAAS,CAAC,IAAI,QAAQ,IACrC,IAAI,CAAC;YACF,UAAU;YACV,WAAW,IAAM,UAAU,QAAQ;QACvC,GACC,KAAK,CAAC,CAAA,MAAO,QAAQ,KAAK,CAAC,wBAAwB;IAC5D;IAEA,oCAAoC;IACpC,MAAM,iBAAiB,CAAC;QACpB,MAAM,SAAmD;YACrD,SAAS;YACT,aAAa;YACb,QAAQ;YACR,WAAW;YACX,wBAAwB;YACxB,qCAAqC;YACrC,mBAAmB;YACnB,iBAAiB;QACrB;QAEA,OACI,MAAM,CAAC,OAAmC,IAAI;IAEtD;IAEA,8EAA8E;IAC9E,qCAAqC;IAErC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO;QAC/B,OAAO;IACX;IAEA,qBACI,8OAAC;QACG,WAAU;QACV,SAAS;kBAET,cAAA,8OAAC;YAAI,WAAU;;8BAEX,8OAAC;oBACG,SAAS;oBACT,WAAU;oBACV,cAAW;8BAEX,cAAA,8OAAC,4LAAA,CAAA,IAAC;wBAAC,MAAM;;;;;;;;;;;8BAIb,8OAAC;oBACG,SAAS;oBACT,WAAU;oBACV,cAAW;8BAEV,uBACG;;0CACI,8OAAC,oMAAA,CAAA,QAAK;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC3B,8OAAC;gCAAK,WAAU;0CAAyB;;;;;;;qDAG7C;;0CACI,8OAAC,0MAAA,CAAA,SAAM;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC5B,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;gBAKrC,wBACG,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBAAI,WAAU;kCAAU;;;;;;;;;;2BAE7B,sBACA,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAAkC;;;;;;0CAGhD,8OAAC;gCAAE,WAAU;0CAAgB;;;;;;;;;;;;;;;;2BAGrC,wBACA;;sCAEI,8OAAC;4BAAG,WAAU;sCAAqC,OAAO,KAAK;;;;;;sCAE/D,8OAAC;4BAAE,WAAU;sCACR,OAAO,OAAO,IAAI,OAAO,WAAW,IAAI;;;;;;;;;;;;;;;;;;;AAUrE","debugId":null}}]
}